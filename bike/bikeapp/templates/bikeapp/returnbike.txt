# To urls.py add: path('return/<int:userid>/', views.return)

#return a bike function

def return(request, userid):
    #Setup database connection
    db = pymysql.connect(host='localhost', user='root', password='123123', database='bikerental')
    cursor = db.cursor(pymysql.cursors.DictCursor)

    #Get user from userID
    cursor.execute("SELECT * FROM customer_info WHERE ID = %s", int(userid))
    user = cursor.fetchone()
    userArea = user["uarea"]

    # select a bike where uarea == barea
    # and busage == 0
    # and bstatus == 0

    cursor.execute("SELECT * FROM bike_info WHERE barea = %s AND busage = 0 AND bstatus = 0", userArea)
    bike = cursor.fetchone()

    cursor.execute("UPDATE bike_info SET busage = 0 WHERE bID = %s", int(bike["bID"]))
    db.commit()

    # with userid get user
    # on request assign bike based on user coordinates
    # on request start timer

    print(user["uarea"], bike["bID"])
    return HttpResponse("This is the rent a bike page")